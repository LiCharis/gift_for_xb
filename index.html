<!doctype html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Happy Birthday</title>
	<link rel="stylesheet" type="text/css" href="css/styles.css">

</head>

<style>

.iframepage {
        -webkit-overflow-scrolling: touch;
        overflow-x: scroll;
        overflow-y: hidden;
    }

    ::-webkit-scrollbar {
        width: 0px;
    }

    /*局部滚动的dom节点*/
    .scroll-el {
        overflow: auto;
    }

	.mayday-lyrics {
		position: absolute;
		width: 100%;
		height: 100%;
		pointer-events: none;
	}

	.lyrics-text {
		position: absolute;
		color: #f5b663;
		font-size: 1.2rem;
		text-shadow: 0 0 10px rgba(245, 182, 99, 0.5);
		opacity: 0;
		animation: fadeInOut 5s infinite;
	}

	@keyframes fadeInOut {
		0%, 100% { opacity: 0; }
		50% { opacity: 1; }
	}

	.lyrics-1 { top: 15%; left: 20%; animation-delay: 0s; }
	.lyrics-2 { top: 25%; right: 20%; animation-delay: 1s; }
	.lyrics-3 { bottom: 25%; left: 15%; animation-delay: 2s; }
	.lyrics-4 { bottom: 15%; right: 15%; animation-delay: 3s; }

	h2.spotlight-text {
		color: #333;
		font-family: Helvetica;
		padding: 0;
		font-size:35px;
		letter-spacing: -0.1rem;
		position: relative;
		text-align: center;
	}
  
	h2.spotlight-text::after {
		content: attr(data-spotlight);
		color: transparent;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		-webkit-clip-path: ellipse(100px 100px at 0% 50%);
		clip-path: ellipse(100px 100px at 0% 50%);
		animation: spotlight 5s infinite;
		background-image: url(https://images.unsplash.com/photo-1579547621869-0ddb5f237392?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1500&q=80);
		background-size: 150%;
		background-position: center center;
		-webkit-background-clip: text;
		background-clip: text;
	}
  
	@keyframes spotlight {
		0% {
		-webkit-clip-path: ellipse(100px 100px at 0% 50%);
		clip-path: ellipse(100px 100px at 0% 50%);
		}
		
		50% {
		-webkit-clip-path: ellipse(100px 100px at 100% 50%);
		clip-path: ellipse(100px 100px at 100% 50%);
		}
		
		100% {
		-webkit-clip-path: ellipse(100px 100px at 0% 50%);
		clip-path: ellipse(100px 100px at 0% 50%);
		}
	}

	.container {
		position: relative;
		z-index: 6;
		padding: 30px;
		background: transparent;
	}

	.tree-container {
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 20px;
	}

	.tree-form {
		position: relative;
		width: 360px;
		height: 420px;
		background: linear-gradient(180deg, rgba(20, 110, 70, 0.82), rgba(8, 64, 44, 0.78));
		padding: 70px 40px 40px;
		clip-path: polygon(50% 0%, 92% 18%, 78% 24%, 94% 40%, 80% 46%, 96% 63%, 76% 67%, 90% 86%, 10% 86%, 24% 67%, 4% 63%, 20% 46%, 6% 40%, 22% 24%, 8% 18%);
		box-shadow: 
			0 18px 50px rgba(0, 0, 0, 0.32),
			inset 0 0 0 2px rgba(255, 255, 255, 0.18),
			inset 0 40px 90px rgba(255, 255, 255, 0.08);
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		gap: 15px;
	}

	.tree-form::before {
		content: '';
		position: absolute;
		inset: 0;
		clip-path: inherit;
		background:
			radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.16), rgba(255, 255, 255, 0) 55%),
			radial-gradient(circle at 60% 65%, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0) 60%);
		opacity: 0.95;
		pointer-events: none;
	}

	.tree-topper {
		position: absolute;
		top: -56px;
		left: 50%;
		transform: translateX(-50%);
		width: 180px;
		height: 120px;
		pointer-events: none;
	}

	.tree-star {
		position: absolute;
		top: 0;
		left: 50%;
		transform: translateX(-50%);
		width: 64px;
		height: 64px;
		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='128' height='128' viewBox='0 0 128 128'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%23fff1a6'/><stop offset='0.55' stop-color='%23ffd35c'/><stop offset='1' stop-color='%23ffb200'/></linearGradient></defs><path d='M64 6l14.8 30 33.2 4.8-24 23.4 5.7 33.1L64 82.4 34.3 97.3 40 64.2 16 40.8 49.2 36z' fill='url(%23g)' stroke='%23fff7cf' stroke-width='3'/></svg>");
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.35));
		animation: topperGlow 2.8s ease-in-out infinite;
	}

	.gold-apple {
		position: absolute;
		top: 40px;
		left: 58%;
		width: 54px;
		height: 54px;
		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><radialGradient id='a' cx='30%25' cy='30%25' r='70%25'><stop offset='0' stop-color='%23fff3b0'/><stop offset='0.35' stop-color='%23ffd35c'/><stop offset='0.72' stop-color='%23f4b400'/><stop offset='1' stop-color='%23b46b00'/></radialGradient><linearGradient id='s' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%232c7a2c'/><stop offset='1' stop-color='%230f3c1b'/></linearGradient></defs><path d='M82 16c-10 0-18 6-22 14 10 2 19 8 24 16 6-8 10-19 10-30 0-1-6 0-12 0z' fill='url(%23s)'/><path d='M70 40c-26 0-44 18-44 44 0 28 20 50 44 50s44-22 44-50c0-26-18-44-44-44z' fill='url(%23a)'/><path d='M58 60c-11 6-18 17-18 30 0 4 1 8 2 12 10-21 24-32 44-36-9-9-20-10-28-6z' fill='rgba(255,255,255,0.25)'/><path d='M70 36c0-10 4-20 12-28' fill='none' stroke='%23704c00' stroke-width='6' stroke-linecap='round'/></svg>");
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 12px 18px rgba(0, 0, 0, 0.35));
		animation: applePulse 1.9s ease-in-out infinite;
	}

	@keyframes topperGlow {
		0%, 100% { transform: translateX(-50%) scale(1); filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.35)); }
		50% { transform: translateX(-50%) scale(1.06); filter: drop-shadow(0 12px 26px rgba(255, 214, 90, 0.55)); }
	}

	@keyframes applePulse {
		0%, 100% { transform: scale(1); }
		50% { transform: scale(1.08) rotate(-2deg); }
	}

	.tree-ornament {
		position: absolute;
		width: 34px;
		height: 34px;
		border-radius: 50%;
		background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0) 45%),
			linear-gradient(135deg, rgba(255, 85, 120, 0.9), rgba(255, 200, 80, 0.5));
		box-shadow: 0 12px 22px rgba(0, 0, 0, 0.28);
		opacity: 0.9;
		pointer-events: none;
	}

	.tree-ornament.o1 { top: 34%; left: 25%; }
	.tree-ornament.o2 { top: 42%; right: 22%; background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0) 45%), linear-gradient(135deg, rgba(90, 210, 255, 0.9), rgba(140, 255, 190, 0.5)); }
	.tree-ornament.o3 { top: 56%; left: 30%; background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0) 45%), linear-gradient(135deg, rgba(255, 140, 60, 0.9), rgba(255, 240, 120, 0.5)); }

	.tree-sock {
		position: absolute;
		width: 58px;
		height: 58px;
		left: 18%;
		top: 18%;
		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='128' height='128' viewBox='0 0 128 128'><path d='M44 20h46v34c0 22 10 28 18 33-6 22-26 32-46 32-24 0-42-14-42-38V20z' fill='%23d72638'/><path d='M44 20h46v14H44z' fill='%23ffffff'/><path d='M44 34h46v8H44z' fill='%23ffffff' opacity='0.7'/><path d='M62 72c0 10-10 18-20 18' stroke='%23ffffff' stroke-width='10' stroke-linecap='round' opacity='0.65'/></svg>");
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 10px 16px rgba(0, 0, 0, 0.28));
		transform: rotate(-12deg);
		pointer-events: none;
	}

	.tree-candy {
		position: absolute;
		width: 56px;
		height: 56px;
		right: 16%;
		top: 24%;
		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><path d='M48 32c-9 10-9 26 1 36l20 20-20 20c-10 10-10 26-1 36l-12 10c-16-16-16-42 0-58l10-10-10-10c-16-16-16-42 0-58z' fill='%23ffffff' opacity='0.9'/><path d='M92 32c9 10 9 26-1 36L71 88l20 20c10 10 10 26 1 36l12 10c16-16 16-42 0-58l-10-10 10-10c16-16 16-42 0-58z' fill='%23ffffff' opacity='0.9'/><path d='M54 42c-6 6-6 16 0 22l18 18-18 18c-6 6-6 16 0 22 14-6 28-6 44 0 6-6 6-16 0-22L80 82l18-18c6-6 6-16 0-22-16 6-30 6-44 0z' fill='%23ff4d6d'/><path d='M62 50c10 4 22 4 32 0' stroke='%23ffd35c' stroke-width='8' stroke-linecap='round' opacity='0.75'/><path d='M62 114c10 4 22 4 32 0' stroke='%23ffd35c' stroke-width='8' stroke-linecap='round' opacity='0.75'/></svg>");
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 10px 16px rgba(0, 0, 0, 0.28));
		transform: rotate(10deg);
		pointer-events: none;
	}

	.tree-trunk {
		position: absolute;
		bottom: -18px;
		left: 50%;
		transform: translateX(-50%);
		width: 90px;
		height: 64px;
		border-radius: 20px;
		background: linear-gradient(180deg, rgba(125, 70, 25, 0.95), rgba(70, 35, 10, 0.95));
		box-shadow: 0 14px 34px rgba(0, 0, 0, 0.35);
		pointer-events: none;
	}

	.tree-trunk::after {
		content: "";
		position: absolute;
		inset: 10px 14px;
		border-radius: 16px;
		background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.16), rgba(255, 255, 255, 0) 55%);
		opacity: 0.8;
	}

	.santa-reindeer {
		position: absolute;
		left: -90px;
		top: 16%;
		width: 92px;
		height: 92px;
		background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><path d='M40 52c-12 0-20 10-20 22 0 14 12 24 26 24h10l4 10c4 10 16 16 30 16 18 0 30-10 30-26 0-14-10-24-24-24-6-20-24-22-38-22h-18z' fill='%238a4b2a' opacity='0.9'/><circle cx='92' cy='76' r='6' fill='%23222222'/><circle cx='102' cy='92' r='10' fill='%23ff3b3b'/><path d='M72 48c-8-20-18-26-30-30 4 18 10 28 22 38' fill='none' stroke='%238a4b2a' stroke-width='10' stroke-linecap='round'/><path d='M88 46c10-18 22-22 34-24-8 16-16 24-30 30' fill='none' stroke='%238a4b2a' stroke-width='10' stroke-linecap='round'/><path d='M84 32c8 2 14 6 18 12' stroke='%23ffffff' stroke-width='8' stroke-linecap='round' opacity='0.85'/></svg>");
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 14px 26px rgba(0, 0, 0, 0.35));
		opacity: 0.95;
		pointer-events: none;
	}

	#snow-ground {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 0;
		height: var(--snow-level, 10px);
		background: linear-gradient(180deg, rgba(255, 255, 255, 0.92), rgba(240, 250, 255, 0.96));
		box-shadow: 0 -18px 40px rgba(255, 255, 255, 0.22);
		z-index: 4;
		pointer-events: none;
	}

	#snow-ground::before {
		content: "";
		position: absolute;
		inset: -26px 0 0 0;
		background:
			radial-gradient(circle at 15% 35%, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0) 60%),
			radial-gradient(circle at 40% 50%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0) 62%),
			radial-gradient(circle at 70% 40%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0) 62%),
			radial-gradient(circle at 88% 55%, rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0) 64%);
		opacity: 0.9;
		filter: blur(1px);
	}

	#snowman {
		position: fixed;
		left: 18px;
		bottom: 18px;
		width: 140px;
		height: 210px;
		z-index: 7;
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 700ms ease, transform 700ms ease;
		cursor: pointer;
		user-select: none;
	}

	#snowman.ready {
		opacity: 1;
		transform: translateY(0);
	}

	#snowman .snowman-body {
		position: absolute;
		left: 50%;
		bottom: 0;
		transform: translateX(-50%);
		width: 120px;
		height: 120px;
		border-radius: 50%;
		background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.98), rgba(230, 245, 255, 0.92) 55%, rgba(200, 230, 245, 0.85));
		box-shadow: 0 20px 44px rgba(0, 0, 0, 0.22);
	}

	#snowman .snowman-head {
		position: absolute;
		left: 50%;
		bottom: 92px;
		transform: translateX(-50%);
		width: 92px;
		height: 92px;
		border-radius: 50%;
		background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.98), rgba(230, 245, 255, 0.92) 55%, rgba(200, 230, 245, 0.85));
		box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
	}

	#snowman .snowman-face {
		position: absolute;
		inset: 0;
	}

	#snowman .snowman-face::before {
		content: "";
		position: absolute;
		width: 8px;
		height: 8px;
		top: 30px;
		left: 30px;
		border-radius: 50%;
		background: rgba(30, 30, 30, 0.8);
		box-shadow: 24px 0 0 rgba(30, 30, 30, 0.8);
	}

	#snowman .snowman-face::after {
		content: "";
		position: absolute;
		width: 0;
		height: 0;
		top: 46px;
		left: 42px;
		border-left: 16px solid rgba(255, 150, 40, 0.95);
		border-top: 8px solid transparent;
		border-bottom: 8px solid transparent;
		transform: rotate(10deg);
		filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.18));
	}

	#snowman .snowman-bubble {
		position: absolute;
		left: 92px;
		top: 18px;
		padding: 12px 14px;
		border-radius: 18px;
		background: rgba(255, 255, 255, 0.88);
		color: rgba(30, 30, 30, 0.88);
		font-size: 14px;
		box-shadow: 0 16px 40px rgba(0, 0, 0, 0.22);
		opacity: 0;
		transform: translateY(8px);
		transition: opacity 360ms ease, transform 360ms ease;
		pointer-events: none;
		white-space: nowrap;
	}

	#snowman.saying .snowman-bubble {
		opacity: 1;
		transform: translateY(0);
	}

	#snowman.jump {
		animation: snowmanJump 520ms ease;
	}

	@keyframes snowmanJump {
		0% { transform: translateY(0); }
		45% { transform: translateY(-18px); }
		100% { transform: translateY(0); }
	}

	#gift-stage {
		position: fixed;
		left: 50%;
		bottom: 26px;
		transform: translateX(-50%);
		display: flex;
		gap: 14px;
		z-index: 7;
		pointer-events: none;
	}

	.gift {
		width: 70px;
		height: 70px;
		border-radius: 18px;
		background: rgba(255, 255, 255, 0.22);
		box-shadow: 0 18px 46px rgba(0, 0, 0, 0.22), inset 0 0 0 1px rgba(255, 255, 255, 0.22);
		backdrop-filter: blur(6px);
		-webkit-backdrop-filter: blur(6px);
		display: grid;
		place-items: center;
		opacity: 0;
		transform: translateY(12px) scale(0.96);
		transition: opacity 520ms ease, transform 520ms ease;
	}

	.gift.show {
		opacity: 1;
		transform: translateY(0) scale(1);
	}

	.gift .gift-img {
		width: 54px;
		height: 54px;
		background-size: contain;
		background-repeat: no-repeat;
		filter: drop-shadow(0 12px 22px rgba(0, 0, 0, 0.22));
	}
</style>

<body>
	<div class="htmleaf-container">
		<div class="wrapper">
			<div class="moon"><span class="moon-face"></span></div>
			<div>
				<div class="star-1 stars"></div>
				<div class="star-2 stars"></div>
				<div class="star-3 stars"></div>
				<div class="star-4 stars"></div>
				 <div class="star-5 stars"></div>
				<!-- <div class="star-6 stars"></div> -->
				<!-- <div class="star-7 stars"></div>
				<div class="star-10 stars"></div>
				<div class="star-12 stars"></div>
				<div class="star-15 stars"></div> -->
				<!-- <div class="star-61 stars"></div> -->
				<!-- <div class="star-63 stars"></div>
				<div class="star-64 stars"></div> -->
			</div>

			<div class="mayday-lyrics">
				<div class="lyrics-text lyrics-1">如果我们不曾相遇</div>
				<div class="lyrics-text lyrics-2">我会是在哪里</div>
				<div class="lyrics-text lyrics-3">如果我们从不曾相识</div>
				<div class="lyrics-text lyrics-4">不存在这首歌曲</div>
			</div>

			<div class="container">
				<div class="tree-container">
					<div class="tree-form" id="tree-form">
						<div class="tree-topper">
							<div class="tree-star"></div>
							<div class="gold-apple" id="gold-apple"></div>
						</div>
						<div class="tree-sock"></div>
						<div class="tree-candy"></div>
						<div class="tree-ornament o1"></div>
						<div class="tree-ornament o2"></div>
						<div class="tree-ornament o3"></div>
						<div class="santa-reindeer"></div>
						<h2 class="spotlight-text" data-spotlight="Happy Birthday">Happy&nbspBirthday</h2>
						<form class="form" id="login-form">
							<input id="userName" name="userName" type="text" placeholder="用户名" required>
							<input id="pwd" name="pwd" type="password" placeholder="密码(例如:0101)" required>
						</form>
						<h2 class="spotlight-text" data-spotlight="24">24</h2>
						<div class="tree-trunk"></div>
					</div>
				</div>
			</div>

			<ul class="bg-bubbles">
				<li data-gift="0"></li>
				<li data-gift="1"></li>
				<li data-gift="2"></li>
				<li data-gift="3"></li>
				<li data-gift="4"></li>
				<li data-gift="0"></li>
				<li data-gift="1"></li>
				<li data-gift="2"></li>
				<li data-gift="3"></li>
				<li data-gift="4"></li>
				<li data-gift="0"></li>
				<li data-gift="1"></li>
			</ul>

			<div id="gift-stage" aria-hidden="true"></div>
			<div id="snowman" role="button" tabindex="0">
				<div class="snowman-body"></div>
				<div class="snowman-head">
					<div class="snowman-face"></div>
				</div>
				<div class="snowman-bubble">生日快乐</div>
			</div>
			<div id="snow-ground" style="--snow-level: 10px"></div>
		</div>
	</div>

	<script>
		// 修改音乐自动播放
        const audio = document.createElement("audio");
        audio.src = "music/昼夜 - 千与千寻 (钢琴版).mp3";
        audio.autoplay = true;
        audio.loop = true; // 添加循环播放
        document.body.appendChild(audio);

        // 确保音乐在页面加载时播放
        document.addEventListener('DOMContentLoaded', function() {
            audio.play().catch(function(error) {
                console.log("自动播放被阻止:", error);
                // 添加用户交互后播放的备用方案
                document.body.addEventListener('click', function() {
                    audio.play();
                }, { once: true });
            });
        });
	</script>
	<script>
		(function () {
			var giftStage = document.getElementById('gift-stage');
			var snowGround = document.getElementById('snow-ground');
			var snowman = document.getElementById('snowman');

			var gifts = [
				"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><linearGradient id='d' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%23ff6aa6'/><stop offset='1' stop-color='%23ffd35c'/></linearGradient></defs><path d='M54 18c10 10 10 18 16 26 6-8 6-16 16-26 8 6 12 14 12 26v10h12v68c0 10-8 18-18 18H50c-10 0-18-8-18-18V54h12V44c0-12 4-20 12-26z' fill='url(%23d)'/><path d='M44 54h52l-6 20H50z' fill='%23ffffff' opacity='0.28'/><path d='M70 44v96' stroke='%23ffffff' stroke-width='10' opacity='0.28'/></svg>",
				"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><linearGradient id='s' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%235ad2ff'/><stop offset='1' stop-color='%23ffb1c0'/></linearGradient></defs><path d='M30 54c10-16 26-26 40-26s30 10 40 26l-10 12c-8-12-18-18-30-18s-22 6-30 18z' fill='url(%23s)'/><path d='M36 64h68v54c0 10-8 18-18 18H54c-10 0-18-8-18-18V64z' fill='rgba(255,255,255,0.22)'/><path d='M42 64h56v54c0 6-4 10-10 10H52c-6 0-10-4-10-10z' fill='url(%23s)' opacity='0.92'/><path d='M70 64v74' stroke='%23ffffff' stroke-width='10' opacity='0.22'/></svg>",
				"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><radialGradient id='g' cx='35%25' cy='30%25' r='70%25'><stop offset='0' stop-color='%23fff7cf'/><stop offset='0.4' stop-color='%23ffd35c'/><stop offset='1' stop-color='%23b46b00'/></radialGradient></defs><path d='M70 30c18 0 34 8 34 22 0 10-8 18-18 18H54c-10 0-18-8-18-18 0-14 16-22 34-22z' fill='url(%23g)'/><path d='M54 62h32c14 0 24 10 24 22s-10 22-24 22H54c-14 0-24-10-24-22s10-22 24-22z' fill='none' stroke='rgba(255,255,255,0.65)' stroke-width='10'/><circle cx='70' cy='80' r='10' fill='url(%23g)'/><path d='M64 82l6 6 16-16' stroke='rgba(255,255,255,0.7)' stroke-width='8' stroke-linecap='round' stroke-linejoin='round' opacity='0.6'/></svg>",
				"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><linearGradient id='b' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%23ffd35c'/><stop offset='1' stop-color='%23ff6aa6'/></linearGradient></defs><path d='M32 64c10-20 28-34 38-34s28 14 38 34l-8 12c-10-14-22-22-30-22s-20 8-30 22z' fill='rgba(255,255,255,0.22)'/><path d='M30 76c0-10 8-18 18-18h44c10 0 18 8 18 18v36c0 12-10 22-22 22H52c-12 0-22-10-22-22V76z' fill='url(%23b)' opacity='0.92'/><circle cx='56' cy='94' r='6' fill='rgba(255,255,255,0.65)'/><circle cx='70' cy='106' r='6' fill='rgba(255,255,255,0.65)'/><circle cx='84' cy='94' r='6' fill='rgba(255,255,255,0.65)'/></svg>",
				"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><defs><linearGradient id='p' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%23b2f7ef'/><stop offset='1' stop-color='%23ffb1c0'/></linearGradient></defs><path d='M46 32h48c10 0 18 8 18 18v50c0 18-14 32-32 32H60c-18 0-32-14-32-32V50c0-10 8-18 18-18z' fill='url(%23p)'/><path d='M50 36h40v16H50z' fill='rgba(255,255,255,0.28)'/><path d='M46 76h48' stroke='rgba(255,255,255,0.45)' stroke-width='10' stroke-linecap='round'/><path d='M58 64c-10 8-14 18-14 30' stroke='rgba(255,255,255,0.35)' stroke-width='10' stroke-linecap='round'/><path d='M82 64c10 8 14 18 14 30' stroke='rgba(255,255,255,0.35)' stroke-width='10' stroke-linecap='round'/></svg>"
			];

			function setSnowLevel(px) {
				snowGround.style.setProperty('--snow-level', px + 'px');
			}

			var snowLevel = 10;
			var snowMax = 120;
			function growSnow(add) {
				snowLevel = Math.min(snowMax, snowLevel + add);
				setSnowLevel(Math.round(snowLevel));
			}

			var audioCtx;
			function playCrack() {
				try {
					if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
					var t0 = audioCtx.currentTime;
					var duration = 0.12;
					var bufferSize = Math.floor(audioCtx.sampleRate * duration);
					var buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
					var data = buffer.getChannelData(0);
					for (var i = 0; i < bufferSize; i++) {
						var x = i / bufferSize;
						data[i] = (Math.random() * 2 - 1) * (1 - x) * 0.9;
					}
					var noise = audioCtx.createBufferSource();
					noise.buffer = buffer;

					var filter = audioCtx.createBiquadFilter();
					filter.type = 'bandpass';
					filter.frequency.setValueAtTime(900, t0);
					filter.Q.setValueAtTime(2.2, t0);

					var gain = audioCtx.createGain();
					gain.gain.setValueAtTime(0.0001, t0);
					gain.gain.exponentialRampToValueAtTime(0.55, t0 + 0.01);
					gain.gain.exponentialRampToValueAtTime(0.0001, t0 + duration);

					noise.connect(filter);
					filter.connect(gain);
					gain.connect(audioCtx.destination);
					noise.start(t0);
					noise.stop(t0 + duration);

					var osc = audioCtx.createOscillator();
					osc.type = 'triangle';
					osc.frequency.setValueAtTime(220, t0);
					var og = audioCtx.createGain();
					og.gain.setValueAtTime(0.0001, t0);
					og.gain.exponentialRampToValueAtTime(0.18, t0 + 0.01);
					og.gain.exponentialRampToValueAtTime(0.0001, t0 + 0.08);
					osc.connect(og);
					og.connect(audioCtx.destination);
					osc.start(t0);
					osc.stop(t0 + 0.09);
				} catch (e) {
				}
			}

			function addGift(index) {
				if (!giftStage) return;
				var gift = document.createElement('div');
				gift.className = 'gift';
				var inner = document.createElement('div');
				inner.className = 'gift-img';
				inner.style.backgroundImage = "url(\"" + gifts[index] + "\")";
				gift.appendChild(inner);
				giftStage.appendChild(gift);
				requestAnimationFrame(function () {
					gift.classList.add('show');
				});
			}

			function crackEgg(egg) {
				if (!egg || egg.classList.contains('egg-cracked')) return;
				egg.classList.add('egg-cracking');
				playCrack();
				growSnow(4);
				var giftIndex = Number(egg.getAttribute('data-gift')) || 0;
				addGift(giftIndex);
				try {
					var rect = egg.getBoundingClientRect();
					var cx = rect.left + rect.width / 2;
					var cy = rect.top + rect.height / 2;
					var count = 12;
					for (var i = 0; i < count; i++) {
						var shard = document.createElement('div');
						shard.className = 'egg-shard';
						shard.style.left = (cx - 7 + (Math.random() * 10 - 5)) + 'px';
						shard.style.top = (cy - 7 + (Math.random() * 10 - 5)) + 'px';
						shard.style.setProperty('--dx', ((Math.random() * 2 - 1) * 140) + 'px');
						shard.style.setProperty('--dy', ((-60 - Math.random() * 160)) + 'px');
						shard.style.setProperty('--dr', ((Math.random() * 2 - 1) * 260) + 'deg');
						document.body.appendChild(shard);
						(function (el) {
							setTimeout(function () {
								if (el && el.parentNode) el.parentNode.removeChild(el);
							}, 980);
						})(shard);
					}
				} catch (e) {
				}
				setTimeout(function () {
					egg.classList.add('egg-cracked');
					setTimeout(function () {
						if (egg && egg.parentNode) egg.parentNode.removeChild(egg);
					}, 950);
				}, 170);
			}

			function setupEggs() {
				var eggs = document.querySelectorAll('.bg-bubbles li');
				for (var i = 0; i < eggs.length; i++) {
					(function (egg) {
						egg.addEventListener('click', function (e) {
							e.preventDefault();
							crackEgg(egg);
						});
					})(eggs[i]);
				}
			}

			function setupSnowman() {
				if (!snowman) return;
				setTimeout(function () {
					snowman.classList.add('ready');
				}, 900);
				function sayHi() {
					snowman.classList.remove('jump');
					void snowman.offsetWidth;
					snowman.classList.add('jump');
					snowman.classList.add('saying');
					growSnow(2);
					setTimeout(function () {
						snowman.classList.remove('saying');
					}, 1200);
				}
				snowman.addEventListener('click', function (e) {
					e.preventDefault();
					sayHi();
				});
				snowman.addEventListener('keydown', function (e) {
					if (e.key === 'Enter' || e.key === ' ') {
						e.preventDefault();
						sayHi();
					}
				});
			}

			function startSnowGrowth() {
				var last = performance.now();
				function loop(now) {
					var dt = now - last;
					last = now;
					growSnow(Math.min(0.08, dt / 14000));
					requestAnimationFrame(loop);
				}
				requestAnimationFrame(loop);
			}

			setupEggs();
			setupSnowman();
			startSnowGrowth();
		})();
	</script>
	<script src="js/flower.js" type="text/javascript"></script>
	<script src="js/jquery-2.1.1.min.js" type="text/javascript"></script>
	<script src="js/jquery-1.8.4.min.js" type="text/javascript"></script>
</body>
</html>
